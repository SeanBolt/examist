
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Workflow Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.0">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="migrations.html" />
    
    
    <link rel="prev" href="tools.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Research
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../research/downloading-papers.html">
            
                <a href="../research/downloading-papers.html">
            
                    
                    Downloading Exam Papers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../research/parsing-papers.html">
            
                <a href="../research/parsing-papers.html">
            
                    
                    Parsing Exam Papers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Design
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../design/architecture.html">
            
                <a href="../design/architecture.html">
            
                    
                    Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../design/database.html">
            
                <a href="../design/database.html">
            
                    
                    Database
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../design/api.html">
            
                <a href="../design/api.html">
            
                    
                    API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../design/ui.html">
            
                <a href="../design/ui.html">
            
                    
                    UI
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Implementation
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../implementation/project-structure.html">
            
                <a href="../implementation/project-structure.html">
            
                    
                    Project Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../implementation/backend.html">
            
                <a href="../implementation/backend.html">
            
                    
                    Backend
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../implementation/frontend.html">
            
                <a href="../implementation/frontend.html">
            
                    
                    Frontend
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Development
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="version-control.html">
            
                <a href="version-control.html">
            
                    
                    Version Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="tools.html">
            
                <a href="tools.html">
            
                    
                    Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.3" data-path="workflow.html">
            
                <a href="workflow.html">
            
                    
                    Workflow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="migrations.html">
            
                <a href="migrations.html">
            
                    
                    Migrations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="deploying.html">
            
                <a href="deploying.html">
            
                    
                    Deploying
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Testing
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../testing/test-design.html">
            
                <a href="../testing/test-design.html">
            
                    
                    Test Design
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../testing/continuous-integration.html">
            
                <a href="../testing/continuous-integration.html">
            
                    
                    Continuous Integration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../results.html">
            
                <a href="../results.html">
            
                    
                    Results
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../conclusions.html">
            
                <a href="../conclusions.html">
            
                    
                    Conclusions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../references.html">
            
                <a href="../references.html">
            
                    
                    References
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    Appendices
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../appendices/test-fixtures.html">
            
                <a href="../appendices/test-fixtures.html">
            
                    
                    Appendix 1: Test Fixtures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../appendices/paper-specification.html">
            
                <a href="../appendices/paper-specification.html">
            
                    
                    Appendix 2: Exam Paper Specification
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Workflow</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="43-workflow">4.3 Workflow</h2><p>The development workflow the project was designated between a couple of tools. Each of these tools served their own unique process and were fundamental to the process.</p><h3 id="client">Client</h3><h4 id="npm-scripts">npm Scripts</h4><p>To run any aspect of the client, the <code>npm run-script</code> facility was used heavily instead of build tool such as Gulp or Grunt. It offered a lightweight way to write the scripts to build the client aswell as running those scripts. For example, to build the production version of the application, the npm script uses the locally installed webpack to build:</p><pre><code class="lang-json"><span class="hljs-string">&quot;scripts&quot;</span>: {
    <span class="hljs-string">&quot;build&quot;</span>: <span class="hljs-string">&quot;webpack&quot;</span>,
    <span class="hljs-string">&quot;build-production&quot;</span>: <span class="hljs-string">&quot;NODE_ENV=production npm run build&quot;</span>
}</code></pre>
<p>And to run, navigate to the <code>client/</code> directory and execute:</p><pre><code>$ npm run build-production</code></pre>
<h4 id="webpack">Webpack</h4><p>Webpack is how the client side is bundled together into a single file. Webpack takes the dependency tree and creates an environment in the browser where all they dependencies are imported correctly and synchronously. The unminified build of the application collects over 1200+ separate Javascript files and combines them into a single, <em>huge</em> 3mb worth of code file. Serving the javascript in that form is a serious user experience failure because of the load time before anything is shown on the screen. The following optimisations have yet to be added:</p><ul><li>Using production builds of the libraries.
</li>
<li>Minification.
</li>
<li>Remove development and debugging code.
</li>
<li>Google closure compiler.
</li></ul>
<p>This process should cut the size of the code down by half and then other techniques such as gzipping and code-splitting (loading the code on demand) should bring it down to a reasonable size.</p><h4 id="hot-reloading">Hot Reloading</h4><p>Building and refreshing the page becomes very tedious when trying to develop components deep down within multiple layers of user interaction in the app. This is where <em>Hot Module Replacement</em> feature in Webpack is works a dream. With a local development server, Webpack will watch for changes in the file system, pick up any changes made to the application and send down the newly updated module over a socket to the app to update in realtime. The <em>React Hot Module Reloader</em> builds on this technology to allow components to update their render methods and perform a re-render, all while maintaining the application tree and state. It&apos;s essentially a highly complicated live-reloading technique for modern Javascript applications.</p><p>To start the client development server with hot reloading, run the following command:</p><pre><code>$ npm run dev</code></pre>
<p><img src="assets/workflow.png"></p><center><i>The tools combined, working concurrently on the home workstation.</i></center>



<h3 id="server">Server</h3><p>The workflow of the server was fairly simple. First, we had to enter the virtualenv of the project. On the local machine, this was called <code>fyp</code>. Using the <code>workon</code> command, the project&apos;s virtualenv was activated and all dependencies required for the project would resolve correctly.</p><pre><code>$ workon fyp</code></pre>
<p>As you will read later in the Deployment chapter, the server requires <em>environment variables</em> to understand how to connect to the database and othe configuration. The standard practice is to create a <code>.env</code> file in the <code>server</code> directory (that&apos;s <strong>not checked into source control</strong>) and specify the contents of the variable. We use the <code>export</code> function to persist the variables for the current shell session. See the <code>config.py</code> for a list of environment variables that can configure the app. The contents of the local <code>.env</code>:</p><pre><code class="lang-sh"><span class="hljs-built_in">export</span> DB_USER=adrian
<span class="hljs-built_in">export</span> DB_PASS=root
<span class="hljs-built_in">export</span> DB_NAME=exp
<span class="hljs-built_in">export</span> APP_DEBUG=True</code></pre>
<p>And then <code>source</code> those vars:</p><pre><code>$ source .env</code></pre>
<p>Finally, the server needs to be started. Flask has an inbuilt debug mode that will automatically restart the server on any changes. To start the server, ensure the <code>APP_DEBUG</code> flask is true and run the following command:</p><pre><code>$ python init.py</code></pre>
<p>This, in combination with the client development server locally, deploys a fully functioning web app on the host system that reacts to changes in the application automatically.</p>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="tools.html" class="navigation navigation-prev " aria-label="Previous page: Tools">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="migrations.html" class="navigation navigation-next " aria-label="Next page: Migrations">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Workflow","level":"1.5.3","depth":2,"next":{"title":"Migrations","level":"1.5.4","depth":2,"path":"development/migrations.md","ref":"development/migrations.md","articles":[]},"previous":{"title":"Tools","level":"1.5.2","depth":2,"path":"development/tools.md","ref":"development/tools.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"development/workflow.md","mtime":"2016-04-21T18:11:41.000Z","type":"markdown"},"gitbook":{"version":"3.2.0","time":"2016-09-26T14:54:48.984Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

